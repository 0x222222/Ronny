<!DOCTYPE html>
<html lang="en">
<head> <meta charset="UTF-8">
    <title>Map</title>
    <link rel="stylesheet" type="text/css" href="style/main.css">
    <link rel="stylesheet" type="text/css" href="style/hud.css">
    <link rel="stylesheet" type="text/css" href="style/endscreen.css">
    <link rel="stylesheet" type="text/css" href="style/wind.css">
    <link rel="stylesheet" type="text/css" href="style/controlTable.css">
    <link rel="stylesheet" type="text/css" href="style/balls/inviBall.css">
    <link rel="stylesheet" type="text/css" href="style/balls/contactBall.css">
    <link rel="stylesheet" type="text/css" href="style/balls/beastBall.css">
    <link rel="stylesheet" type="text/css" href="style/balls/cellBall.css">
</head>

<body oncontextmenu="return false" >
<div id="hud" style="z-index: 2">
    <a id="score"></a>
    <table id="healthtableOverlayer">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>

    <div id="glow"></div>

    <table id="healthtable">
        <tr>
            <td id="healthbar0"></td>
            <td id="healthbar1"></td>
            <td id="healthbar2"></td>
            <td id="healthbar3"></td>
            <td id="healthbar4"></td>
            <td id="healthbar5"></td>
            <td id="healthbar6"></td>
            <td id="healthbar7"></td>
            <td id="healthbar8"></td>
            <td id="healthbar9"></td>
        </tr>
    </table>

    <div id="effectBox"></div>
    <div id="effectLast"></div>
</div>

<div id="gameboxOverlayer">
    <h1 id="fadeoutTitle"></h1>     <!--Placeholder max. 20 char-->
    <a id="fadeoutDescription"></a> <!--Placeholder max. 600 char-->
</div>
<div id="gameboxOverlayerStun"></div>

<div id="wind">
    <div id="wind4"></div>
    <div id="wind3"></div>
    <div id="wind2"></div>
    <div id="wind1"></div>
</div>

<div id="gamebox">

    <div id="debug">
        <a class="debug">DEBUG </a>
        <a id="time" class="debug"></a>
        <a id="debug0" class="debug"></a>
        <a id="debug1" class="debug"></a>
        <a id="debug2" class="debug"></a>
        <a id="debug3" class="debug"></a>
        <a id="debug4" class="debug"></a>
        <a id="debug5" class="debug"></a>
        <a id="debug6" class="debug"></a>
        <a id="debug7" class="debug"></a>
        <a id="debug8" class="debug"></a>
        <a id="debug9" class="debug"></a>
        <a>|</a>
    </div>
    <div id="debugExtend">
        <a class="debugExtend">DEBUG Extend:</a><br>
        <a id="debugExtend0" class="debugExtend">last down: </a><br>
        <a id="debugExtend1" class="debugExtend">last up: </a><br>
        <a id="debugExtend2" class="debugExtend"></a><br>
        <a id="debugExtend3" class="debugExtend"></a><br>
        <a id="debugExtend4" class="debugExtend"></a><br>
        <a id="debugExtend5" class="debugExtend"></a><br>
        <a id="debugExtend6" class="debugExtend"></a><br>
        <a id="debugExtend7" class="debugExtend"></a><br>
        <a id="debugExtend8" class="debugExtend"></a><br>
        <a id="debugExtend9" class="debugExtend"></a>
    </div>

<div id="player"></div>
</div>

<div id="endscreenBackground"></div>
<div id="endscreen">
    <div id="endscreenInnerBox">
        <table id="controlTable">
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/WKey.png"><img class="controlTableIMG" src="assets/keys/arrowUp.png"></td>
                <td>Up</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/SKey.png"><img class="controlTableIMG" src="assets/keys/arrowDown.png"></td>
                <td>Down</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/AKey.png"><img class="controlTableIMG" src="assets/keys/arrowLeft.png"></td>
                <td>Left</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/DKey.png"><img class="controlTableIMG" src="assets/keys/arrowRight.png"></td>
                <td>Right</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/SpaceKey.png"></td>
                <td>Rush</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/CKey.png"></td>
                <td>Teleport </td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/ESC.png"></td>
                <td>Menu</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/ESC.png"><img class="controlTableIMG" src="assets/keys/RKey.png"></td>
                <td>Retry</td>
            </tr>
            <tr>
                <td><img class="controlTableIMG" src="assets/keys/mouse.png"></td>
                <td>Shoot</td>
            </tr>
        </table>
        <div id="scoreMenue"></div>
    </div>
</div>

</body>

</html>

<script src="variable.js"></script>
<script src="getInput.js"></script>
<script src="scriptLibrary/standard.js"></script>
<script src="scriptLibrary/collision.js"></script>
<script src="scriptLibrary/move.js"></script>
<script src="scriptLibrary/spawn.js"></script>
<script src="scriptLibrary/balls.js"></script>
<script src="scriptLibrary/spawn.js"></script>
<script src="scriptLibrary/round.js"></script>
<script src="scriptLibrary/hp.js"></script>
<script src="scriptLibrary/shot.js"></script>
<script src="scriptLibrary/powerUp.js"></script>
<script src="scriptLibrary/effects.js"></script>
<script src="scriptLibrary/debug.js"></script>
<script src="scriptLibrary/balls/inviBall.js"></script>
<script src="scriptLibrary/balls/contactBall.js"></script>
<script src="scriptLibrary/balls/beastBall.js"></script>
<script src="scriptLibrary/balls/ballG2.js"></script>
<script src="scriptLibrary/handleSpecialInput.js"></script>
<script src="scriptLibrary/balls/cellBall.js"></script>
<script src="scriptLibrary/urlParams.js"></script>
<script src="scriptLibrary/zoom.js"></script>
<script src="scriptLibrary/sounds.js"></script>
<script src="jquery-3.3.1.min.js"></script>
<script src="scriptLibrary/options.js"></script>

<script>
    //debug
    _g1  =0;
    _g1c =0;
    _g2  =0;
    _g2c =0;
</script>


<script>
    //startup
    document.getElementById("player").style.top = "730px";
    document.getElementById("player").style.left = "1570px";
    showHealth();
    for(i=0;i<0;i++) {
    createCellBall(5)
    }

    //sleep function


    function sleep(ms) {
        return new Promise(
           x => { setTimeout(x, ms)}
        )
    }

    //get JSON Data

    getJson();


    //noinspection BadExpressionStatementJS
    async function game() {


        while(_live){
            //head*******************************************
            if(!_menue) {

                _time += _gameSpeed;
                posPlayerVariable();

                movePlayer();

                //body*******************************************
                fps();
                getRound();

                //Could be parallel

                moveShot();
                moveInfinityBall();


                movePushBall();

                moveFastBall();
                moveFollowBall();

                moveInviBall();
                moveContactBall();

                moveBeastBall();
                moveCellBall();



                changePlayerColor();
                powerupCollect();
                removeVignette();

                clock = (new Date()).getTime();
                    moveBall();
                    //moveBall();
                    //moveBall();
                _g1c++;
                _g1 += ((new Date()).getTime()-clock);

                clock = (new Date()).getTime();
                    moveBallG2();
                    moveBallG2();
                    moveBallG2();
                _g2c++;
                _g2 += ((new Date()).getTime()-clock);
                //log("G1: "+Math.round(_g1/_g1c)+"ms | G2: "+Math.round(_g2/_g2c)+"ms")

                //log("G1: "+Math.round(_g1/_g1c)+"ms | G2: "+Math.round(_g2/_g2c)+"ms")

                //console.log(cellBalls.length);


                //foot********************************************
            }
            //noinspection BadExpressionStatementJS,UnterminatedStatementJS
            glowHealth();
            await sleep(_gameSpeed);
        }

    }
</script>
